<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Dashmachine Crypto</title>
  
  <script src="https://unpkg.com/dash"></script>
  <script src="dashmachine-crypto-lib.js" type="text/javascript"></script>

  <script>
    
    const vendorPrivateKey = '98cf6a9908bbc383e1a5564629d51eb8ae287fac0e9f01ab4390342ace306318'
    const message = 'hello';
    const userPubicKey = 'ApcIR8ojHDOfCH6DBDBUGIgDI3wiG9GmBwUibtm32xCe'
    const userPrivateKey = '219c8a8f9376750cee9f06e0409718f2a1b88df4acc61bf9ed9cf252c8602768'
    const vendorPublicKey = 'Ag/YNnbAfG0IpNeH4pfMzgqIsgooR36s5MzzYJV76TpO'
    /*
    console.log(`Encrypting message "${message}"...`);
    const encrypted = DashmachineCrypto.encrypt(vendorPrivateKey, message, userPubicKey);
    console.dir(encrypted.data);
    console.log(`Decrypting result message "${message}"...`);
    const decrypted = DashmachineCrypto.decrypt(userPrivateKey, encrypted.data, vendorPublicKey);
    console.dir(decrypted);
    console.log(`Hashing message "${message}"...`);
    const digest = DashmachineCrypto.hash(message);
    console.dir(digest.data);
    console.log(`Verifying hash...`);
    const verifies = DashmachineCrypto.verify(message, digest.data);
    console.dir(verifies.success)
    const entropy = DashmachineCrypto.generateEntropy();
    console.log(`entropy: ${entropy}`);
    */
   const decrypted = DashmachineCrypto.decrypt('98cf6a9908bbc383e1a5564629d51eb8ae287fac0e9f01ab4390342ace306318', 'eyJ0eXBlIjoiQnVmZmVyIiwiZGF0YSI6WzIsMTUxLDgsNzEsMjAyLDM1LDI4LDUxLDE1OSw4LDEyNiwxMzEsNCw0OCw4NCwyNCwxMzYsMywzNSwxMjQsMzQsMjcsMjA5LDE2Niw3LDUsMzQsMTEwLDIxNywxODMsMjE5LDE2LDE1OCwxMzMsOTEsMjQwLDEwOCw5OSwxMjUsNywyMjgsNDgsMTUzLDEwNywyOSwxOSwxMDcsNzksMzcsMTIwLDYzLDU4LDE3Nyw5NywxMTQsNTIsMTM2LDQxLDc0LDc5LDgyLDkyLDE3MSw5MSw3MSwxNTIsMTYyLDI0NCwxMzIsMTAxLDUyLDI0NSwxODAsMjAsMTMxLDU1LDEzNiw3OCw5OSwyMzUsMTksOTAsMTk0LDIwNywyMDksOTYsMTc5LDExMCwxNDEsMjQwLDEzMywyMzIsMjMzLDI0MCwxNjUsMTY3LDEwOSw0LDIzMiwxMDIsNjEsMjAwLDE2NCw4MiwyMjYsMTgwLDIxNywyMTUsOTYsMjE1LDUxLDgzLDE0NywxMTYsMTY4LDIyMCw3NywxNDIsMTE0LDI0MCwxNjQsNTcsMjI5LDEwOSw5MiwyMzAsODQsNTcsNjldfQ==', 'ApcIR8ojHDOfCH6DBDBUGIgDI3wiG9GmBwUibtm32xCe');
    
/*
    const senderName = 'alice';
    const senderMnemonic = 'uniform analyst paper father soldier toe lesson fetch exhaust jazz swim response';
    const recipientName = 'bob';
    const recipientMnemonic = 'liar fee island situate deal exotic flat direct save bag fiscal news';
    const userMessage = `Hello ${recipientName}!`;
    const dpnsContractId = '295xRRRMGYyAruG39XdAibaU9jMAzxhknkkAxFE7uVkW'

    async function testUsernameEncryption() {
      try {
        console.log(`send message \"${userMessage}\" to user: ${recipientName}`)
        const encrypted = await DashmachineCrypto.encryptForUsername(userMessage, senderName, recipientName, senderMnemonic, dpnsContractId);
        console.log('encrypted:', encrypted.data);
        const decrypted = await DashmachineCrypto.decryptForUsername(encrypted.data, recipientName, senderName, recipientMnemonic, dpnsContractId)
        console.log('decrypted:', decrypted.data);
      }
      catch (e) {
        console.log('error :', e);

      }

    }

    (async () => { await testUsernameEncryption() })()
*/  
  </script>
</head>

<body>
  <div id="test">
  </div>
</body>

</html>